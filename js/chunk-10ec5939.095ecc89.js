(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10ec5939"],{"966a":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"articleCon"},[t("div",{staticClass:"articlePage"},[t("div",{staticClass:"head mb-4"},[t("div",{staticClass:"d-flex justify-content-between"},[t("a",{attrs:{href:""},on:{click:function(s){return s.preventDefault(),e.goback.apply(null,arguments)}}},[e._v("回上頁")]),t("h6",[e._v(e._s(e.article.author))])]),t("h2",{staticClass:"font-weight-bold mt-4 mb-2"},[e._v(e._s(e.article.title))]),t("h6",[e._v(e._s(e.article.category))])]),t("div",{staticClass:"content"},[t("p",[e._v(e._s(e.article.content))])])]),t("div",{staticClass:"articlefeatures"},[t("div",[t("span",[-1!==e.article.likeList.indexOf(e.userID)&&""!==e.userID?t("a",{staticClass:"good",attrs:{href:""},on:{click:function(s){return s.preventDefault(),e.articleLike.apply(null,arguments)}}},[t("i",{staticClass:"fa-solid fa-thumbs-up"}),e._v("收回讚")]):t("a",{staticClass:"good",attrs:{href:""},on:{click:function(s){return s.preventDefault(),e.articleLike.apply(null,arguments)}}},[t("i",{staticClass:"fa-regular fa-thumbs-up"}),e._v("讚")])]),t("span",[-1!==e.article.collect.indexOf(JSON.stringify(e.userID))&&""!==e.userID?t("a",{staticClass:"collect",attrs:{href:""},on:{click:function(s){return s.preventDefault(),e.articleCollect.apply(null,arguments)}}},[t("i",{staticClass:"fa-solid fa-star"}),e._v("取消收藏")]):t("a",{staticClass:"collect",attrs:{href:""},on:{click:function(s){return s.preventDefault(),e.articleCollect.apply(null,arguments)}}},[t("i",{staticClass:"fa-regular fa-star"}),e._v("收藏")])])])]),t("div",{staticClass:"message"},[t("p",[e._v("共 "+e._s(e.messageList.length)+" 則留言")]),t("ul",e._l(e.messageList,(function(s,a){return t("li",{key:a},[t("div",{staticClass:"mainReply"},[t("div",{staticClass:"avatar"},[t("div",{class:s.mainMsg.male},[t("i",{staticClass:"fas fa-user"})])]),t("div",[t("p",{staticClass:"name"},[e._v(e._s(s.mainMsg.author))]),t("p",{staticClass:"content"},[e._v(e._s(s.mainMsg.content))]),t("p",{staticClass:"time"},[t("span",[e._v("B"+e._s(a+1))]),e._v(e._s(s.mainMsg.time))]),t("div",{staticClass:"MSGfeatures"},[t("a",{staticClass:"mx-2",attrs:{href:""},on:{click:function(s){return s.preventDefault(),e.openReply(a)}}},[e._v("回覆")]),t("a",{staticClass:"mx-2",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.addMSGlike(s.mainMsg.msgID,e.userID)}}},[-1!==s.mainMsg.good.indexOf(""+e.userID)?t("i",{staticClass:"fa-solid fa-thumbs-up"}):t("i",{staticClass:"fa-regular fa-thumbs-up"})]),e._v("\n              "+e._s(s.mainMsg.good.length)+"\n            ")])]),s.mainMsg.userID==e.userID?t("a",{staticClass:"del",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.delMessage(s.mainMsg.msgID)}}},[e._v("刪除")]):e._e()]),t("div",{staticClass:"NewReply",class:"reply-"+a},[t("div",[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.NewReplyCon,expression:"NewReplyCon",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"請輸入回覆留言內容"},domProps:{value:e.NewReplyCon},on:{input:function(s){s.target.composing||(e.NewReplyCon=s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}}),t("button",{staticClass:"mx-2",attrs:{disabled:""==e.NewReplyCon},on:{click:function(t){return t.preventDefault(),e.addReply(s.mainMsg.msgID)}}},[e._v("回覆")])])]),e._l(s.reply,(function(s,i){return t("div",{key:i,staticClass:"reply mt-4"},[t("div",{staticClass:"avatar"},[t("div",{class:s.male},[t("i",{staticClass:"fas fa-user"})])]),t("div",[t("p",{staticClass:"name"},[e._v(e._s(s.author))]),t("p",{staticClass:"content"},[e._v(e._s(s.content))]),t("p",{staticClass:"time"},[t("span",[e._v("B"+e._s(a+1)),t("em",[e._v("-"+e._s(i+1))])]),e._v(e._s(s.time))]),t("div",{staticClass:"MSGfeatures"},[t("a",{staticClass:"mx-2",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.addMSGlike(s.msgID,e.userID)}}},[-1!==s.good.indexOf(""+e.userID)?t("i",{staticClass:"fa-solid fa-thumbs-up"}):t("i",{staticClass:"fa-regular fa-thumbs-up"})]),e._v("\n              "+e._s(s.good.length)+"\n            ")])]),s.userID==e.userID?t("a",{staticClass:"del",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.delMessage(s.msgID)}}},[e._v("刪除")]):e._e()])}))],2)})),0),t("div",{staticClass:"newMessage"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newMessage.content,expression:"newMessage.content",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"新增留言"},domProps:{value:e.newMessage.content},on:{click:function(s){return e.logStatus()},input:function(s){s.target.composing||e.$set(e.newMessage,"content",s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}}),t("button",{staticClass:"btn btn-danger",attrs:{type:"submit",disabled:e.submit},on:{click:e.addMessage}},[e._v("送出")])])])])},i=[],c=(t("7f7f"),t("ac6a"),t("1157")),o=t.n(c),n={name:"articleCon",data:function(){return{Aid:"",article:{collect:[],likeList:[]},messageList:[],newMessage:{content:"",time:"",good:""},NewReplyCon:""}},props:["userID","user"],methods:{getArticleCon:function(){var e=this;this.$store.dispatch("upadateisLoad",!0);var s={Aid:e.Aid};o.a.ajax({type:"get",url:"".concat("https://script.google.com/macros/s/AKfycbw_ihOJIcasnt_IyWGVvl_19htLyRgCSo0kbAo-u93pBuX9RQV8OWLgK_QPJHFbb2hx/exec"),data:s,success:function(s){s=JSON.parse(s),s.success?(e.article=s.data,e.article.collect=JSON.parse(e.article.collect),e.article.likeList=JSON.parse(e.article.likeList),e.$store.dispatch("upadateisLoad",!1)):(console.log(s.message),e.$store.dispatch("upadateisLoad",!1))},error:function(e){console.log(e)}})},articleCollect:function(){var e=this;if(this.$store.dispatch("upadateisLoad",!0),""===this.userID)alert("請先登入會員"),this.$emit("openLoginIn");else{var s={Aid:e.Aid,title:e.article.title,userID:e.userID};o.a.ajax({type:"get",url:"".concat("https://script.google.com/macros/s/AKfycbxC36tZ_3eyRxWWe-QCJmkXlquPFCj_305fY-ZsgP8BLT-K0ECQZF5d9tH7-AQ6FzHj/exec"),data:s,success:function(s){console.log(s),s=JSON.parse(s),s.success?("receive"===s.mode?e.$bus.$emit("message:push","收藏成功","success"):"put"===s.mode&&e.$bus.$emit("message:push","取消收藏成功","success"),e.getArticleCon()):(e.$bus.$emit("message:push",s.message,"danger"),console.log(s.message),e.$store.dispatch("upadateisLoad",!1))},error:function(s){console.log(s),e.$store.dispatch("upadateisLoad",!1)}})}},articleLike:function(){var e=this;if(this.$store.dispatch("upadateisLoad",!0),""===this.userID)alert("請先登入會員"),this.$emit("openLoginIn");else{var s=JSON.stringify({Aid:e.Aid,title:e.article.title,userID:e.userID});console.log(s);var t="".concat("https://script.google.com/macros/s/AKfycbw_ihOJIcasnt_IyWGVvl_19htLyRgCSo0kbAo-u93pBuX9RQV8OWLgK_QPJHFbb2hx/exec");e.$http.post(t,s).then((function(s){console.log(s),s.data.success&&"press"===s.data.mode||s.data.success&&"takeback"===s.data.mode||e.$bus.$emit("message:push",s.message,"danger"),e.getArticleCon()}))}},goback:function(){this.$router.push("/")},getMessage:function(){var e=this;this.$store.dispatch("upadateisLoad",!0);var s={mid:e.Aid};o.a.ajax({type:"get",url:"".concat("https://script.google.com/macros/s/AKfycbyKY_6WZrzxu7JohdQsZ7JJhsT6KgXLQbjkZkPzJhsnKzdCMGM9tk2soqglo1KMtHWk/exec"),data:s,dataType:"JSON",success:function(s){e.messageList=[],0!==s.length&&s.forEach((function(s){if(s.mainMsg){var t={};t.mainMsg=JSON.parse(s.mainMsg),0!==s.reply.length&&(t.reply=s.reply.map((function(e){return JSON.parse(e)}))),e.messageList.push(t),e.newMessage.author="",e.newMessage.male="",e.newMessage.content=""}})),e.$store.dispatch("upadateisLoad",!1)},error:function(e){console.log(e)}})},addMessage:function(){var e=this;e.$store.dispatch("upadateisLoad",!0);var s=new Date,t=s.getFullYear(),a=s.getMonth()+1,i=s.getDate(),c=s.getHours(),n=s.getMinutes(),r=s.getSeconds(),l="".concat(t," / ").concat(a," / ").concat(i,"  ").concat(c,":").concat(n,":").concat(r),u="".concat(e.Aid,"-").concat((new Date).getTime()),d={mode:"addMessage",mid:e.Aid,author:e.user.name,userID:e.userID,male:e.user.male,content:e.newMessage.content,time:l,msgID:u};o.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbyKY_6WZrzxu7JohdQsZ7JJhsT6KgXLQbjkZkPzJhsnKzdCMGM9tk2soqglo1KMtHWk/exec"),data:d,success:function(s){s=JSON.parse(s)[0],s.success?(e.$bus.$emit("message:push",s.message,"success"),e.getMessage()):(console.log(s),e.$bus.$emit("message:push",s.message,"danger"),e.$store.dispatch("upadateisLoad",!1))},error:function(s){console.log(s),alert("系統出錯，請稍後在試一次或者聯絡客服人員"),e.$store.dispatch("upadateisLoad",!1)}})},delMessage:function(e){var s=this;this.$store.dispatch("upadateisLoad",!0);var t={mode:"delMessage",mid:s.Aid,msgID:e};console.log(t),o.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbyKY_6WZrzxu7JohdQsZ7JJhsT6KgXLQbjkZkPzJhsnKzdCMGM9tk2soqglo1KMtHWk/exec"),data:t,success:function(e){e=JSON.parse(e)[0],console.log("del",e),e.success?(s.$bus.$emit("message:push",e.message,"success"),s.getMessage()):(console.log(e),s.$bus.$emit("message:push",e.message,"danger"),s.$store.dispatch("upadateisLoad",!1))},error:function(e){console.log(e)}})},openReply:function(e){""!==this.userID?o()(".reply-".concat(e)).toggle():(alert("請先登入會員"),this.$emit("openLoginIn"))},addReply:function(e){var s=this;s.$store.dispatch("upadateisLoad",!0);var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,c=t.getDate(),n=t.getHours(),r=t.getMinutes(),l=t.getSeconds(),u="".concat(a," / ").concat(i," / ").concat(c,"  ").concat(n,":").concat(r,":").concat(l),d="".concat(s.Aid,"-").concat((new Date).getTime()),g={mode:"addReply",mid:s.Aid,author:s.user.name,userID:s.userID,male:s.user.male,content:s.NewReplyCon,time:u,good:0,mainMsgID:e,msgID:d};o.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbyKY_6WZrzxu7JohdQsZ7JJhsT6KgXLQbjkZkPzJhsnKzdCMGM9tk2soqglo1KMtHWk/exec"),data:g,success:function(e){e=JSON.parse(e)[0],e.success?(console.log(e),s.$bus.$emit("message:push",e.message,"success")):(console.log(e),s.$bus.$emit("message:push",e.message,"danger"))},error:function(e){console.log(e),alert("系統出錯，請稍後在試一次或者聯絡客服人員"),s.$store.dispatch("upadateisLoad",!1)}}).then((function(){s.getMessage(),s.NewReplyCon="",o()(".NewReply").hide()}))},addMSGlike:function(e,s){var t=this;if(""!==s){this.$store.dispatch("upadateisLoad",!0);var a={mode:"addMSGlike",mid:t.Aid,msgID:e,userID:s};o.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbyKY_6WZrzxu7JohdQsZ7JJhsT6KgXLQbjkZkPzJhsnKzdCMGM9tk2soqglo1KMtHWk/exec"),data:a,dataType:"JSON",success:function(e){e=e[0],e.success,console.log(e.message),t.$store.dispatch("upadateisLoad",!1)},error:function(e){console.log(e)}}).then((function(){t.getMessage()}))}else alert("請先登入會員"),this.$emit("openLoginIn")},logStatus:function(){""===this.userID&&(alert("請先登入會員"),this.$emit("openLoginIn"))}},computed:{submit:function(){var e=this;return!e.newMessage.content}},created:function(){this.Aid=this.$route.params.id,this.getArticleCon(),this.getMessage()}},r=n,l=(t("96b4"),t("2877")),u=Object(l["a"])(r,a,i,!1,null,"38a9d18a",null);s["default"]=u.exports},"96b4":function(e,s,t){"use strict";t("e81e")},e81e:function(e,s,t){}}]);
//# sourceMappingURL=chunk-10ec5939.095ecc89.js.map