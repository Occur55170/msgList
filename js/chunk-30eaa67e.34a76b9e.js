(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30eaa67e"],{"439e":function(s,e,t){"use strict";t("9623")},9623:function(s,e,t){},"966a":function(s,e,t){"use strict";t.r(e);var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"articleCon"},[t("div",{staticClass:"articlePage"},[t("div",{staticClass:"head mb-4"},[t("div",{staticClass:"d-flex justify-content-between"},[t("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),s.goback.apply(null,arguments)}}},[s._v("回上頁")]),t("h6",[s._v(s._s(s.article.author))])]),t("h2",{staticClass:"font-weight-bold mt-4 mb-2"},[s._v(s._s(s.article.title))]),t("h6",[s._v(s._s(s.article.category))])]),t("div",{staticClass:"content"},[t("p",[s._v(s._s(s.article.content))])])]),t("div",{staticClass:"articlefeatures"},[t("div",[t("p",[t("a",{staticClass:"good",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),s.articleLike.apply(null,arguments)}}},[-1!==s.article.likeList.indexOf(""+s.userID)&&""!==s.userID?t("span",[t("i",{staticClass:"fa-solid fa-thumbs-up"}),s._v(s._s(s.article.likeList.length))]):t("span",[t("i",{staticClass:"fa-regular fa-thumbs-up"}),s._v(s._s(s.article.likeList.length))])])]),t("p",[-1!==s.article.collect.indexOf(JSON.stringify(s.userID))&&""!==s.userID?t("a",{staticClass:"collect",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),s.articleCollect.apply(null,arguments)}}},[t("i",{staticClass:"fa-solid fa-star"}),s._v("取消收藏")]):t("a",{staticClass:"collect",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),s.articleCollect.apply(null,arguments)}}},[t("i",{staticClass:"fa-regular fa-star"}),s._v("收藏")])])])]),t("div",{staticClass:"message"},[t("p",[s._v("共 "+s._s(s.messageList.length)+" 則留言")]),t("ul",s._l(s.messageList,(function(e,a){return t("li",{key:a},[t("div",{staticClass:"mainReply"},[t("div",{staticClass:"avatar"},[t("div",{class:e.mainMsg.male},[t("i",{staticClass:"fas fa-user"})])]),t("div",[t("p",{staticClass:"name"},[s._v(s._s(e.mainMsg.author))]),t("p",{staticClass:"content"},[s._v(s._s(e.mainMsg.content))]),t("p",{staticClass:"time"},[t("span",[s._v("B"+s._s(a+1))]),s._v(s._s(e.mainMsg.time))]),t("div",{staticClass:"MSGfeatures"},[t("a",{staticClass:"mx-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),s.openReply(a)}}},[s._v("回覆")]),t("a",{staticClass:"mx-2",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),s.addMSGlike(e.mainMsg.msgID,s.userID)}}},[-1!==e.mainMsg.good.indexOf(""+s.userID)?t("i",{staticClass:"fa-solid fa-thumbs-up"}):t("i",{staticClass:"fa-regular fa-thumbs-up"})]),s._v("\n              "+s._s(e.mainMsg.good.length)+"\n            ")])]),e.mainMsg.userID==s.userID?t("a",{staticClass:"del",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),s.delMessage(e.mainMsg.msgID)}}},[s._v("刪除")]):s._e()]),t("div",{staticClass:"NewReply",class:"reply-"+a},[t("div",[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.NewReplyCon,expression:"NewReplyCon",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"請輸入回覆留言內容"},domProps:{value:s.NewReplyCon},on:{input:function(e){e.target.composing||(s.NewReplyCon=e.target.value.trim())},blur:function(e){return s.$forceUpdate()}}}),t("button",{staticClass:"mx-2",attrs:{disabled:""==s.NewReplyCon},on:{click:function(t){return t.preventDefault(),s.addReply(e.mainMsg.msgID)}}},[s._v("回覆")])])]),s._l(e.reply,(function(e,c){return t("div",{key:c,staticClass:"reply mt-4"},[t("div",{staticClass:"avatar"},[t("div",{class:e.male},[t("i",{staticClass:"fas fa-user"})])]),t("div",[t("p",{staticClass:"name"},[s._v(s._s(e.author))]),t("p",{staticClass:"content"},[s._v(s._s(e.content))]),t("p",{staticClass:"time"},[t("span",[s._v("B"+s._s(a+1)),t("em",[s._v("-"+s._s(c+1))])]),s._v(s._s(e.time))]),t("div",{staticClass:"MSGfeatures"},[t("a",{staticClass:"mx-2",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),s.addMSGlike(e.msgID,s.userID)}}},[-1!==e.good.indexOf(""+s.userID)?t("i",{staticClass:"fa-solid fa-thumbs-up"}):t("i",{staticClass:"fa-regular fa-thumbs-up"})]),s._v("\n              "+s._s(e.good.length)+"\n            ")])]),e.userID==s.userID?t("a",{staticClass:"del",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),s.delMessage(e.msgID)}}},[s._v("刪除")]):s._e()])}))],2)})),0),t("div",{staticClass:"newMessage"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:s.newMessage.content,expression:"newMessage.content",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"新增留言"},domProps:{value:s.newMessage.content},on:{click:function(e){return s.logStatus()},input:function(e){e.target.composing||s.$set(s.newMessage,"content",e.target.value.trim())},blur:function(e){return s.$forceUpdate()}}}),t("button",{staticClass:"btn btn-danger",attrs:{type:"submit",disabled:s.submit},on:{click:s.addMessage}},[s._v("送出")])])])])},c=[],i=(t("7f7f"),t("ac6a"),t("1157")),r=t.n(i),o={name:"articleCon",data:function(){return{Aid:"",article:{collect:[],likeList:[]},messageList:[],newMessage:{content:"",time:"",good:""},NewReplyCon:""}},props:["userID","user"],methods:{getArticleCon:function(){var s=this;this.$store.dispatch("upadateisLoad",!0);var e={Aid:s.Aid};r.a.ajax({type:"get",url:"".concat("https://script.google.com/macros/s/AKfycbwaDfdaiJzD2p7_N5-1N5tlRSry05EjqUivPIIlnKrtmamu6qKO94z5iIolL_KN8JhR/exec"),data:e,success:function(e){if(e=JSON.parse(e),e.success)s.article=e.data,s.article.collect=JSON.parse(s.article.collect),s.article.likeList=JSON.parse(s.article.likeList),s.$store.dispatch("upadateisLoad",!1);else{var t=e.message,a="danger";s.$store.dispatch("messageModules/updateMessage",{message:t,success:a}),s.$store.dispatch("upadateisLoad",!1)}},error:function(e){var t="系統出錯，請稍後在試一次或者聯絡客服人員",a="danger";s.$store.dispatch("messageModules/updateMessage",{message:t,success:a})}})},articleCollect:function(){var s=this;if(this.$store.dispatch("upadateisLoad",!0),""===this.userID)alert("請先登入會員"),this.$emit("openLoginIn");else{var e={Aid:s.Aid,title:s.article.title,userID:s.userID};r.a.ajax({type:"get",url:"".concat("https://script.google.com/macros/s/AKfycbxC36tZ_3eyRxWWe-QCJmkXlquPFCj_305fY-ZsgP8BLT-K0ECQZF5d9tH7-AQ6FzHj/exec"),data:e,success:function(e){if(e=JSON.parse(e),e.success){if("receive"===e.mode){var t="收藏成功",a="success";s.$store.dispatch("messageModules/updateMessage",{message:t,success:a})}else if("put"===e.mode){var c="取消收藏成功",i="success";s.$store.dispatch("messageModules/updateMessage",{message:c,success:i})}s.getArticleCon()}else{var r=e.message,o="danger";s.$store.dispatch("messageModules/updateMessage",{message:r,success:o}),s.$store.dispatch("upadateisLoad",!1)}},error:function(e){s.$store.dispatch("upadateisLoad",!1)}})}},articleLike:function(){var s=this;if(this.$store.dispatch("upadateisLoad",!0),""===this.userID)alert("請先登入會員"),this.$emit("openLoginIn");else{var e=JSON.stringify({Aid:s.Aid,title:s.article.title,userID:JSON.stringify(s.userID)}),t="".concat("https://script.google.com/macros/s/AKfycbwaDfdaiJzD2p7_N5-1N5tlRSry05EjqUivPIIlnKrtmamu6qKO94z5iIolL_KN8JhR/exec");s.$http.post(t,e).then((function(e){if(e.data.success&&"press"===e.data.mode){var t="按讚",a="success";s.$store.dispatch("messageModules/updateMessage",{message:t,success:a})}else if(e.data.success&&"takeback"===e.data.mode){var c="收回讚",i="success";s.$store.dispatch("messageModules/updateMessage",{message:c,success:i})}else{var r=e.message,o="danger";s.$store.dispatch("messageModules/updateMessage",{message:r,success:o})}s.getArticleCon()}))}},goback:function(){this.$router.push("/")},getMessage:function(){var s=this;this.$store.dispatch("upadateisLoad",!0);var e={mid:s.Aid};r.a.ajax({type:"get",url:"".concat("https://script.google.com/macros/s/AKfycbyKY_6WZrzxu7JohdQsZ7JJhsT6KgXLQbjkZkPzJhsnKzdCMGM9tk2soqglo1KMtHWk/exec"),data:e,dataType:"JSON",success:function(e){s.messageList=[],0!==e.length&&e.forEach((function(e){if(e.mainMsg){var t={};t.mainMsg=JSON.parse(e.mainMsg),0!==e.reply.length&&(t.reply=e.reply.map((function(s){return JSON.parse(s)}))),s.messageList.push(t),s.newMessage.author="",s.newMessage.male="",s.newMessage.content=""}})),s.$store.dispatch("upadateisLoad",!1)},error:function(e){var t="留言載入錯誤，請稍後在試一次或者聯絡客服人員",a="danger";s.$store.dispatch("messageModules/updateMessage",{message:t,success:a})}})},addMessage:function(){var s=this;s.$store.dispatch("upadateisLoad",!0);var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,c=e.getDate(),i=e.getHours(),o=e.getMinutes(),n=e.getSeconds(),u="".concat(t," / ").concat(a," / ").concat(c,"  ").concat(i,":").concat(o,":").concat(n),l="".concat(s.Aid,"-").concat((new Date).getTime()),d={mode:"addMessage",mid:s.Aid,author:s.user.name,userID:s.userID,male:s.user.male,content:s.newMessage.content,time:u,msgID:l};r.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbyKY_6WZrzxu7JohdQsZ7JJhsT6KgXLQbjkZkPzJhsnKzdCMGM9tk2soqglo1KMtHWk/exec"),data:d,success:function(e){e=JSON.parse(e)[0];var t=e.message;if(e.success){var a="success";s.$store.dispatch("messageModules/updateMessage",{message:t,success:a}),s.getMessage()}else{var c="danger";s.$store.dispatch("messageModules/updateMessage",{message:t,success:c}),s.$store.dispatch("upadateisLoad",!1)}},error:function(e){alert("系統出錯，請稍後在試一次或者聯絡客服人員"),s.$store.dispatch("upadateisLoad",!1)}})},delMessage:function(s){var e=this;this.$store.dispatch("upadateisLoad",!0);var t={mode:"delMessage",mid:e.Aid,msgID:s};r.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbyKY_6WZrzxu7JohdQsZ7JJhsT6KgXLQbjkZkPzJhsnKzdCMGM9tk2soqglo1KMtHWk/exec"),data:t,success:function(s){s=JSON.parse(s)[0];var t=s.message;if(s.success){var a="success";e.$store.dispatch("messageModules/updateMessage",{message:t,success:a}),e.getMessage()}else{var c="danger";e.$store.dispatch("messageModules/updateMessage",{message:t,success:c}),e.$store.dispatch("upadateisLoad",!1)}},error:function(s){alert("系統出錯，請稍後在試一次或者聯絡客服人員")}})},openReply:function(s){""!==this.userID?r()(".reply-".concat(s)).toggle():(alert("請先登入會員"),this.$emit("openLoginIn"))},addReply:function(s){var e=this;e.$store.dispatch("upadateisLoad",!0);var t=new Date,a=t.getFullYear(),c=t.getMonth()+1,i=t.getDate(),o=t.getHours(),n=t.getMinutes(),u=t.getSeconds(),l="".concat(a," / ").concat(c," / ").concat(i,"  ").concat(o,":").concat(n,":").concat(u),d="".concat(e.Aid,"-").concat((new Date).getTime()),g={mode:"addReply",mid:e.Aid,author:e.user.name,userID:e.userID,male:e.user.male,content:e.NewReplyCon,time:l,good:0,mainMsgID:s,msgID:d};r.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbyKY_6WZrzxu7JohdQsZ7JJhsT6KgXLQbjkZkPzJhsnKzdCMGM9tk2soqglo1KMtHWk/exec"),data:g,success:function(s){s=JSON.parse(s)[0];var t=s.message;if(s.success){var a="success";e.$store.dispatch("messageModules/updateMessage",{message:t,success:a})}else{var c="danger";e.$store.dispatch("messageModules/updateMessage",{message:t,success:c})}},error:function(s){alert("系統出錯，請稍後在試一次或者聯絡客服人員"),e.$store.dispatch("upadateisLoad",!1)}}).then((function(){e.getMessage(),e.NewReplyCon="",r()(".NewReply").hide()}))},addMSGlike:function(s,e){var t=this;if(""!==e){this.$store.dispatch("upadateisLoad",!0);var a={mode:"addMSGlike",mid:t.Aid,msgID:s,userID:e};r.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbyKY_6WZrzxu7JohdQsZ7JJhsT6KgXLQbjkZkPzJhsnKzdCMGM9tk2soqglo1KMtHWk/exec"),data:a,dataType:"JSON",success:function(s){if(s=s[0],s.success){var e=s.message,a="success";t.$store.dispatch("messageModules/updateMessage",{message:e,success:a})}else{var c=s.message,i="success";t.$store.dispatch("messageModules/updateMessage",{message:c,success:i})}t.$store.dispatch("upadateisLoad",!1)},error:function(s){var e="系統出錯，請稍後在試一次或者聯絡客服人員",a="danger";t.$store.dispatch("messageModules/updateMessage",{message:e,success:a})}}).then((function(){t.getMessage()}))}else alert("請先登入會員"),this.$emit("openLoginIn")},logStatus:function(){""===this.userID&&(alert("請先登入會員"),this.$emit("openLoginIn"))}},computed:{submit:function(){var s=this;return!s.newMessage.content}},created:function(){this.Aid=this.$route.params.id,this.getArticleCon(),this.getMessage()}},n=o,u=(t("439e"),t("2877")),l=Object(u["a"])(n,a,c,!1,null,"2ed2e3fc",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-30eaa67e.34a76b9e.js.map