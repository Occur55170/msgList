(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b3c43d4"],{"966a":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"articleCon"},[t("div",{staticClass:"articlePage"},[t("div",{staticClass:"head mb-4"},[t("div",{staticClass:"d-flex justify-content-between"},[t("a",{attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.goback.apply(null,arguments)}}},[e._v("回上頁")]),t("h6",[e._v(e._s(e.article.author))])]),t("h2",{staticClass:"font-weight-bold mt-4 mb-2"},[e._v(e._s(e.article.title))]),t("h6",[e._v(e._s(e.article.category))])]),t("div",{staticClass:"content"},[t("p",[e._v(e._s(e.article.content))])])]),t("div",{staticClass:"articlefeatures"},[t("div",[t("p",[t("a",{staticClass:"good",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.articleLike.apply(null,arguments)}}},[-1!==e.article.likeList.indexOf(""+e.userID)&&""!==e.userID?t("span",{staticClass:"addGd"},[t("font-awesome-icon",{tag:"i",attrs:{icon:"fa-solid fa-thumbs-up"}}),e._v(e._s(e.article.likeList.length)+"\n          ")],1):t("span",{staticClass:"rmGd"},[t("font-awesome-icon",{tag:"i",attrs:{icon:"fa-regular fa-thumbs-up"}}),e._v(e._s(e.article.likeList.length)+"\n          ")],1)])]),t("p",[t("a",{staticClass:"collect",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.articleCollect.apply(null,arguments)}}},[-1!==e.article.collect.indexOf(JSON.stringify(e.userID))&&""!==e.userID?t("span",[t("font-awesome-icon",{tag:"i",attrs:{icon:"fa-solid fa-star"}}),e._v("取消收藏\n          ")],1):t("span",[t("font-awesome-icon",{tag:"i",attrs:{icon:"fa-solid fa-star"}}),e._v("收藏\n          ")],1)])])])]),t("div",{staticClass:"message"},[t("p",[e._v("共 "+e._s(e.messageList.length)+" 則留言")]),t("ul",e._l(e.messageList,(function(s,a){return t("li",{key:a},[t("div",{staticClass:"mainReply"},[t("div",{staticClass:"avatar"},[t("div",{class:s.mainMsg.male},[t("font-awesome-icon",{tag:"i",attrs:{icon:"fa-solid fa-user"}})],1)]),t("div",[t("p",{staticClass:"name"},[e._v(e._s(s.mainMsg.author))]),t("p",{staticClass:"content"},[e._v(e._s(s.mainMsg.content))]),t("p",{staticClass:"time"},[t("span",[e._v("B"+e._s(a+1))]),e._v(e._s(s.mainMsg.time))]),t("div",{staticClass:"MSGfeatures"},[t("a",{staticClass:"mx-2",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.openReply(a)}}},[e._v("回覆")]),t("a",{staticClass:"mx-2",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addMSGlike(s.mainMsg.msgID,e.userID)}}},[-1!==s.mainMsg.good.indexOf(""+e.userID)?t("i",{staticClass:"fa-solid fa-thumbs-up"}):t("i",{staticClass:"fa-regular fa-thumbs-up"})]),e._v("\n              "+e._s(s.mainMsg.good.length)+"\n            ")])]),s.mainMsg.userID==e.userID?t("a",{staticClass:"del",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.delMessage(s.mainMsg.msgID)}}},[t("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash-can"}})],1):e._e()]),t("div",{staticClass:"NewReply",class:"reply-"+a},[t("div",[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.NewReplyCon,expression:"NewReplyCon",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"請輸入回覆留言內容"},domProps:{value:e.NewReplyCon},on:{input:function(s){s.target.composing||(e.NewReplyCon=s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}}),t("button",{staticClass:"mx-2",attrs:{disabled:""==e.NewReplyCon},on:{click:function(t){return t.preventDefault(),e.addReply(s.mainMsg.msgID)}}},[e._v("回覆")])])]),e._l(s.reply,(function(s,c){return t("div",{key:c,staticClass:"reply mt-4"},[t("div",{staticClass:"avatar"},[t("div",{class:s.male},[t("font-awesome-icon",{tag:"i",attrs:{icon:"fa-solid fa-user"}})],1)]),t("div",[t("p",{staticClass:"name"},[e._v(e._s(s.author))]),t("p",{staticClass:"content"},[e._v(e._s(s.content))]),t("p",{staticClass:"time"},[t("span",[e._v("B"+e._s(a+1)),t("em",[e._v("-"+e._s(c+1))])]),e._v(e._s(s.time))]),t("div",{staticClass:"MSGfeatures"},[t("a",{staticClass:"mx-2",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addMSGlike(s.msgID,e.userID)}}},[-1!==s.good.indexOf(""+e.userID)?t("i",{staticClass:"fa-solid fa-thumbs-up"}):t("i",{staticClass:"fa-regular fa-thumbs-up"})]),e._v("\n              "+e._s(s.good.length)+"\n            ")])]),s.userID==e.userID?t("a",{staticClass:"del",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.delMessage(s.msgID)}}},[t("font-awesome-icon",{attrs:{icon:"fa-solid fa-trash-can"}})],1):e._e()])}))],2)})),0),t("div",{staticClass:"newMessage"},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newMessage.content,expression:"newMessage.content",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"新增留言"},domProps:{value:e.newMessage.content},on:{click:function(s){return e.logStatus()},input:function(s){s.target.composing||e.$set(e.newMessage,"content",s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}}),t("button",{staticClass:"btn btn-danger",attrs:{type:"submit",disabled:e.submit},on:{click:e.addMessage}},[e._v("送出")])])])])},c=[],i=(t("7f7f"),t("ac6a"),t("1157")),n=t.n(i),r={name:"articleCon",metaInfo:function(){return{title:this.article.title}},data:function(){return{Aid:"",article:{collect:[],likeList:[]},messageList:[],newMessage:{content:"",time:"",good:""},NewReplyCon:""}},props:["userID","user"],methods:{getArticleCon:function(){var e=this;this.$store.dispatch("upadateisLoad",!0);var s={Aid:e.Aid};n.a.ajax({type:"get",url:"".concat("https://script.google.com/macros/s/AKfycbwaDfdaiJzD2p7_N5-1N5tlRSry05EjqUivPIIlnKrtmamu6qKO94z5iIolL_KN8JhR/exec"),data:s,success:function(s){if(s=JSON.parse(s),s.success)e.article=s.data,e.article.collect=JSON.parse(e.article.collect),e.article.likeList=JSON.parse(e.article.likeList),e.$store.dispatch("upadateisLoad",!1);else{var t=s.message,a="danger";e.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:a}),e.$store.dispatch("upadateisLoad",!1)}},error:function(s){var t="系統出錯，請稍後在試一次或者聯絡客服人員",a="danger";e.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:a})}})},articleCollect:function(){var e=this;if(this.$store.dispatch("upadateisLoad",!0),""===this.userID)alert("請先登入會員"),this.$emit("openLoginIn");else{var s={Aid:e.Aid,title:e.article.title,userID:e.userID};n.a.ajax({type:"get",url:"".concat("https://script.google.com/macros/s/AKfycbzVEFgoiQEzHF0Z_TO6RAnYfd3jh3w-dwnAjV-MMYI0q0q9brQxBkLQMbyWCS6K-DN7/exec"),data:s,success:function(s){if(s=JSON.parse(s),s.success){if("receive"===s.mode){var t="收藏成功",a="success";e.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:a})}else if("put"===s.mode){var c="取消收藏成功",i="success";e.$store.dispatch("AlertMSGModules/updateMessage",{message:c,success:i})}e.getArticleCon()}else{var n=s.message,r="danger";e.$store.dispatch("AlertMSGModules/updateMessage",{message:n,success:r}),e.$store.dispatch("upadateisLoad",!1)}},error:function(s){e.$store.dispatch("upadateisLoad",!1)}})}},articleLike:function(){var e=this;if(this.$store.dispatch("upadateisLoad",!0),""===this.userID)alert("請先登入會員"),this.$emit("openLoginIn");else{var s=JSON.stringify({Aid:e.Aid,title:e.article.title,userID:JSON.stringify(e.userID)}),t="".concat("https://script.google.com/macros/s/AKfycbwaDfdaiJzD2p7_N5-1N5tlRSry05EjqUivPIIlnKrtmamu6qKO94z5iIolL_KN8JhR/exec");e.$http.post(t,s).then((function(s){if(s.data.success&&"press"===s.data.mode){var t="按讚",a="success";e.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:a})}else if(s.data.success&&"takeback"===s.data.mode){var c="收回讚",i="success";e.$store.dispatch("AlertMSGModules/updateMessage",{message:c,success:i})}else{var n=s.message,r="danger";e.$store.dispatch("AlertMSGModules/updateMessage",{message:n,success:r})}e.getArticleCon()}))}},goback:function(){this.$router.push("/")},getMessage:function(){var e=this;this.$store.dispatch("upadateisLoad",!0);var s={mid:e.Aid};n.a.ajax({type:"get",url:"".concat("https://script.google.com/macros/s/AKfycbxZU641pnlC7f1DQS_k__IswgJ1IAT1bn6g_9FKDG50YEM6FPJv5BJ1lGIqUVM3F64v/exec"),data:s,dataType:"JSON",success:function(s){e.messageList=[],0!==s.length&&s.forEach((function(s){if(s.mainMsg){var t={};t.mainMsg=JSON.parse(s.mainMsg),0!==s.reply.length&&(t.reply=s.reply.map((function(e){return JSON.parse(e)}))),e.messageList.push(t),e.newMessage.author="",e.newMessage.male="",e.newMessage.content=""}})),e.$store.dispatch("upadateisLoad",!1)},error:function(s){var t="留言載入錯誤，請稍後在試一次或者聯絡客服人員",a="danger";e.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:a})}})},addMessage:function(){var e=this;e.$store.dispatch("upadateisLoad",!0);var s=new Date,t=s.getFullYear(),a=s.getMonth()+1,c=s.getDate(),i=s.getHours(),r=s.getMinutes(),o=s.getSeconds(),l="".concat(t," / ").concat(a," / ").concat(c,"  ").concat(i,":").concat(r,":").concat(o),u="".concat(e.Aid,"-").concat((new Date).getTime()),d={mode:"addMessage",mid:e.Aid,author:e.user.name,userID:e.userID,male:e.user.male,content:e.newMessage.content,time:l,msgID:u};n.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbxZU641pnlC7f1DQS_k__IswgJ1IAT1bn6g_9FKDG50YEM6FPJv5BJ1lGIqUVM3F64v/exec"),data:d,success:function(s){s=JSON.parse(s)[0];var t=s.message;if(s.success){var a="success";e.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:a}),e.getMessage()}else{var c="danger";e.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:c}),e.$store.dispatch("upadateisLoad",!1)}},error:function(s){alert("系統出錯，請稍後在試一次或者聯絡客服人員"),e.$store.dispatch("upadateisLoad",!1)}})},delMessage:function(e){var s=this;this.$store.dispatch("upadateisLoad",!0);var t={mode:"delMessage",mid:s.Aid,msgID:e};n.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbxZU641pnlC7f1DQS_k__IswgJ1IAT1bn6g_9FKDG50YEM6FPJv5BJ1lGIqUVM3F64v/exec"),data:t,success:function(e){e=JSON.parse(e)[0];var t=e.message;if(e.success){var a="success";s.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:a}),s.getMessage()}else{var c="danger";s.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:c}),s.$store.dispatch("upadateisLoad",!1)}},error:function(e){alert("系統出錯，請稍後在試一次或者聯絡客服人員")}})},openReply:function(e){""!==this.userID?n()(".reply-".concat(e)).toggle():(alert("請先登入會員"),this.$emit("openLoginIn"))},addReply:function(e){var s=this;s.$store.dispatch("upadateisLoad",!0);var t=new Date,a=t.getFullYear(),c=t.getMonth()+1,i=t.getDate(),r=t.getHours(),o=t.getMinutes(),l=t.getSeconds(),u="".concat(a," / ").concat(c," / ").concat(i,"  ").concat(r,":").concat(o,":").concat(l),d="".concat(s.Aid,"-").concat((new Date).getTime()),p={mode:"addReply",mid:s.Aid,author:s.user.name,userID:s.userID,male:s.user.male,content:s.NewReplyCon,time:u,good:0,mainMsgID:e,msgID:d};n.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbxZU641pnlC7f1DQS_k__IswgJ1IAT1bn6g_9FKDG50YEM6FPJv5BJ1lGIqUVM3F64v/exec"),data:p,success:function(e){e=JSON.parse(e)[0];var t=e.message;if(e.success){var a="success";s.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:a})}else{var c="danger";s.$store.dispatch("AlertMSGModules/updateMessage",{message:t,success:c})}},error:function(e){alert("系統出錯，請稍後在試一次或者聯絡客服人員"),s.$store.dispatch("upadateisLoad",!1)}}).then((function(){s.getMessage(),s.NewReplyCon="",n()(".NewReply").hide()}))},addMSGlike:function(e,s){var t=this;if(""!==s){this.$store.dispatch("upadateisLoad",!0);var a={mode:"addMSGlike",mid:t.Aid,msgID:e,userID:s};n.a.ajax({type:"post",url:"".concat("https://script.google.com/macros/s/AKfycbxZU641pnlC7f1DQS_k__IswgJ1IAT1bn6g_9FKDG50YEM6FPJv5BJ1lGIqUVM3F64v/exec"),data:a,dataType:"JSON",success:function(e){if(e=e[0],e.success){var s=e.message,a="success";t.$store.dispatch("AlertMSGModules/updateMessage",{message:s,success:a})}else{var c=e.message,i="success";t.$store.dispatch("AlertMSGModules/updateMessage",{message:c,success:i})}t.$store.dispatch("upadateisLoad",!1)},error:function(e){var s="系統出錯，請稍後在試一次或者聯絡客服人員",a="danger";t.$store.dispatch("AlertMSGModules/updateMessage",{message:s,success:a})}}).then((function(){t.getMessage()}))}else alert("請先登入會員"),this.$emit("openLoginIn")},logStatus:function(){""===this.userID&&(alert("請先登入會員"),this.$emit("openLoginIn"))}},computed:{submit:function(){var e=this;return!e.newMessage.content}},created:function(){this.Aid=this.$route.params.id,this.getArticleCon(),this.getMessage()}},o=r,l=(t("dca7"),t("2877")),u=Object(l["a"])(o,a,c,!1,null,"f90ba156",null);s["default"]=u.exports},dca7:function(e,s,t){"use strict";t("fceb")},fceb:function(e,s,t){}}]);
//# sourceMappingURL=chunk-3b3c43d4.eb6c6954.js.map